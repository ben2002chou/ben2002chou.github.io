<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benjamin Shiue-Hal Chou | Academic Profile</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="layout">
        <aside class="sidebar" aria-label="Section navigation">
            <div class="sidebar__brand">
                <img src="source/me.jpg" alt="Benjamin Shiue-Hal Chou" class="sidebar__photo">
                <div>
                    <h1 class="sidebar__name" data-name></h1>
                    <p class="sidebar__role" data-role></p>
                </div>
            </div>
            <button class="theme-toggle" type="button" data-theme-toggle aria-label="Toggle color theme">
                <span class="theme-toggle__icon" aria-hidden="true"></span>
                <span class="theme-toggle__label">Switch to dark mode</span>
            </button>
            <nav class="sidebar__nav" data-nav></nav>
            <div class="sidebar__contact" data-sidebar-contact></div>
        </aside>
        <main class="content" id="top">
            <section class="hero" id="overview">
                <div class="hero__grid">
                    <div class="hero__content">
                        <span class="hero__badge" data-hero-badge></span>
                        <h2 class="hero__title" data-hero-title></h2>
                        <div class="hero__lead" data-hero-lead></div>
                        <div class="hero__actions" data-hero-actions></div>
                        <dl class="hero__stats" data-hero-stats></dl>
                    </div>
                    <div class="hero__panels" data-hero-panels></div>
                </div>
            </section>

            <section id="about" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Profile</span>
                    <h2>Professional Summary</h2>
                </header>
                <div class="about__grid">
                    <div class="about__summary" data-about-summary></div>
                    <div class="about__details" data-about-details></div>
                </div>
            </section>

            <section id="education" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Academic Path</span>
                    <h2>Education</h2>
                </header>
                <div class="timeline" data-education></div>
            </section>

            <section id="experience" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Leadership & Research</span>
                    <h2>Experience</h2>
                </header>
                <div class="timeline" data-experience></div>
            </section>

            <section id="projects" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Hands-on</span>
                    <h2>Projects</h2>
                </header>
                <ul class="cards" data-projects></ul>
            </section>

            <section id="skills" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Toolkit</span>
                    <h2>Skills</h2>
                </header>
                <div class="skills-grid" data-skills></div>
            </section>

            <section id="honors" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Recognition</span>
                    <h2>Honors & Awards</h2>
                </header>
                <ul class="chip-list" data-honors></ul>
            </section>

            <section id="publications" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Selected Work</span>
                    <h2>Publications</h2>
                </header>
                <ol class="publication-list" data-publications></ol>
            </section>

            <section id="patents" class="section">
                <header class="section__header">
                    <span class="section__eyebrow">Innovation</span>
                    <h2>Patents</h2>
                </header>
                <ul class="cards" data-patents></ul>
            </section>

            <section id="contact" class="section section--accent">
                <header class="section__header">
                    <span class="section__eyebrow">Let's Collaborate</span>
                    <h2>Contact</h2>
                </header>
                <div class="contact-card">
                    <div class="contact-card__body" data-contact-body></div>
                    <div class="contact-card__actions" data-contact-actions></div>
                </div>
            </section>

            <footer class="footer">
                <p>&copy; <span id="year"></span> <span data-footer-name></span>. All rights reserved.</p>
            </footer>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script>
        (function () {
            const root = document.documentElement;
            const toggleButton = document.querySelector('[data-theme-toggle]');
            const toggleLabel = toggleButton?.querySelector('.theme-toggle__label');
            const icon = toggleButton?.querySelector('.theme-toggle__icon');
            const storedTheme = window.localStorage.getItem('theme-preference');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

            const applyTheme = (theme, persist = true) => {
                root.setAttribute('data-theme', theme);
                if (persist) {
                    window.localStorage.setItem('theme-preference', theme);
                }
                if (toggleLabel) {
                    toggleLabel.textContent = theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
                }
                if (toggleButton) {
                    toggleButton.setAttribute('aria-pressed', theme === 'dark');
                }
                if (icon) {
                    icon.dataset.mode = theme;
                }
            };

            const initialTheme = storedTheme || (prefersDark.matches ? 'dark' : 'light');
            applyTheme(initialTheme, Boolean(storedTheme));

            toggleButton?.addEventListener('click', () => {
                const nextTheme = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                applyTheme(nextTheme);
            });

            const handlePreferenceChange = (event) => {
                if (!window.localStorage.getItem('theme-preference')) {
                    applyTheme(event.matches ? 'dark' : 'light', false);
                }
            };

            if (typeof prefersDark.addEventListener === 'function') {
                prefersDark.addEventListener('change', handlePreferenceChange);
            } else if (typeof prefersDark.addListener === 'function') {
                prefersDark.addListener(handlePreferenceChange);
            }


            const nav = document.querySelector('[data-nav]');
            let navLinks = [];
            let intersectionObserver;

            const formatMarkdown = (text = '') => {
                if (!text) return '';
                return text
                    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.+?)\*/g, '<em>$1</em>');
            };

            const toParagraphs = (text = '') => {
                return text
                    .split(/\n+/)
                    .map((line) => line.trim())
                    .filter(Boolean);
            };

            const toggleElement = (element, hasContent) => {
                if (!element) return;
                element.style.display = hasContent ? '' : 'none';
            };

            const toggleSection = (sectionId, hasContent) => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.style.display = hasContent ? '' : 'none';
                }
            };

            const parseContact = (contactStr = '') => {
                return contactStr
                    .split('|')
                    .map((entry) => entry.trim())
                    .filter(Boolean)
                    .map((entry) => {
                        const lower = entry.toLowerCase();
                        if (lower.includes('@')) {
                            return { type: 'email', label: entry, href: `mailto:${entry}` };
                        }
                        if (lower.includes('linkedin')) {
                            const url = entry.startsWith('http') ? entry : `https://${entry}`;
                            return { type: 'linkedin', label: 'LinkedIn', href: url };
                        }
                        if (lower.includes('github')) {
                            const url = entry.startsWith('http') ? entry : `https://${entry}`;
                            return { type: 'github', label: 'GitHub', href: url };
                        }
                        const digits = entry.replace(/[^0-9]/g, '');
                        if (digits.length >= 7) {
                            return { type: 'phone', label: entry, href: `tel:${digits}` };
                        }
                        const url = entry.startsWith('http') ? entry : `https://${entry}`;
                        return { type: 'link', label: entry, href: url };
                    });
            };

            const createStat = (term, description) => {
                if (!term || !description) return null;
                const wrapper = document.createElement('div');
                wrapper.className = 'hero__stat';
                const dt = document.createElement('dt');
                dt.textContent = term;
                const dd = document.createElement('dd');
                dd.textContent = description;
                wrapper.append(dt, dd);
                return wrapper;
            };

            const populateNav = (items) => {
                if (!nav) return;
                nav.innerHTML = '';
                navLinks = items.map((item) => {
                    const link = document.createElement('a');
                    link.href = `#${item.id}`;
                    link.textContent = item.label;
                    nav.appendChild(link);
                    return link;
                });
                if (intersectionObserver) {
                    intersectionObserver.disconnect();
                }
                const sections = navLinks
                    .map((link) => document.querySelector(link.getAttribute('href')))
                    .filter(Boolean);
                if (!sections.length) return;
                intersectionObserver = new IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            const id = entry.target.getAttribute('id');
                            const activeLink = nav.querySelector(`[href="#${id}"]`);
                            if (entry.isIntersecting && activeLink) {
                                navLinks.forEach((link) => link.classList.remove('is-active'));
                                activeLink.classList.add('is-active');
                            }
                        });
                    },
                    { rootMargin: '-50% 0px -45% 0px', threshold: 0.1 }
                );
                sections.forEach((section) => intersectionObserver.observe(section));
            };

            const populateResume = (resume) => {
                if (!resume) return;
                const {
                    header = {},
                    professional_summary = '',
                    focus_areas = [],
                    expertise = [],
                    skills: skillList = [],
                    education = [],
                    work_experience = [],
                    projects = [],
                    honors_awards = [],
                    publications = [],
                    patent = []
                } = resume;

                const summaryParagraphs = toParagraphs(professional_summary);

                const nameEl = document.querySelector('[data-name]');
                const roleEl = document.querySelector('[data-role]');
                const heroBadgeEl = document.querySelector('[data-hero-badge]');
                const heroTitleEl = document.querySelector('[data-hero-title]');
                const heroLeadEl = document.querySelector('[data-hero-lead]');
                const heroActionsEl = document.querySelector('[data-hero-actions]');
                const heroStatsEl = document.querySelector('[data-hero-stats]');
                const heroPanelsEl = document.querySelector('[data-hero-panels]');
                const aboutSummaryEl = document.querySelector('[data-about-summary]');
                const aboutDetailsEl = document.querySelector('[data-about-details]');
                const educationEl = document.querySelector('[data-education]');
                const experienceEl = document.querySelector('[data-experience]');
                const projectsEl = document.querySelector('[data-projects]');
                const skillsEl = document.querySelector('[data-skills]');
                const honorsEl = document.querySelector('[data-honors]');
                const publicationsEl = document.querySelector('[data-publications]');
                const patentsEl = document.querySelector('[data-patents]');
                const sidebarContactEl = document.querySelector('[data-sidebar-contact]');
                const contactBodyEl = document.querySelector('[data-contact-body]');
                const contactActionsEl = document.querySelector('[data-contact-actions]');
                const footerNameEl = document.querySelector('[data-footer-name]');

                if (nameEl) {
                    nameEl.textContent = header.name || '';
                }
                if (footerNameEl) {
                    footerNameEl.textContent = header.name || '';
                }

                if (roleEl) {
                    const roleText = header.role || '';
                    roleEl.textContent = roleText;
                    toggleElement(roleEl, Boolean(roleText));
                }

                const heroBadgeText = focus_areas.length ? focus_areas.slice(0, 3).join(' · ') : '';
                if (heroBadgeEl) {
                    heroBadgeEl.textContent = heroBadgeText;
                    toggleElement(heroBadgeEl, Boolean(heroBadgeText));
                }

                if (heroTitleEl) {
                    heroTitleEl.textContent = header.name || '';
                }

                if (heroLeadEl) {
                    heroLeadEl.innerHTML = '';
                    summaryParagraphs.slice(0, 2).forEach((paragraph) => {
                        const p = document.createElement('p');
                        p.textContent = paragraph;
                        heroLeadEl.appendChild(p);
                    });
                    toggleElement(heroLeadEl, Boolean(heroLeadEl.children.length));
                }

                const contacts = parseContact(header.contact || '');
                if (heroActionsEl) {
                    heroActionsEl.innerHTML = '';
                    contacts
                        .filter((item) => ['email', 'linkedin', 'github'].includes(item.type))
                        .slice(0, 2)
                        .forEach((item, index) => {
                            const link = document.createElement('a');
                            link.className = `button${index === 0 ? ' primary' : ''}`;
                            link.href = item.href;
                            if (item.type !== 'email') {
                                link.target = '_blank';
                                link.rel = 'noopener';
                            }
                            link.textContent = item.type === 'email' ? 'Email me' : `View ${item.label}`;
                            heroActionsEl.appendChild(link);
                        });
                    toggleElement(heroActionsEl, Boolean(heroActionsEl.children.length));
                }

                if (heroStatsEl) {
                    heroStatsEl.innerHTML = '';
                    const stats = [
                        header.role ? createStat('Role', header.role) : null,
                        education[0]
                            ? createStat(
                                  'Education',
                                  `${education[0].degree || ''}${
                                      education[0].institution ? ` · ${education[0].institution}` : ''
                                  }`
                              )
                            : null,
                        focus_areas.length ? createStat('Focus Areas', focus_areas.slice(0, 2).join(', ')) : null,
                        publications.length ? createStat('Publications', `${publications.length} listed`) : null,
                        honors_awards.length ? createStat('Honors', `${honors_awards.length} awards`) : null
                    ].filter(Boolean);

                    stats.forEach((stat) => heroStatsEl.appendChild(stat));
                    toggleElement(heroStatsEl, Boolean(heroStatsEl.children.length));
                }

                if (heroPanelsEl) {
                    heroPanelsEl.innerHTML = '';
                    if (focus_areas.length) {
                        const focusCard = document.createElement('article');
                        focusCard.className = 'hero-card';
                        const title = document.createElement('h3');
                        title.textContent = 'Focus Areas';
                        const list = document.createElement('ul');
                        focus_areas.slice(0, 6).forEach((item) => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            list.appendChild(li);
                        });
                        focusCard.append(title, list);
                        heroPanelsEl.appendChild(focusCard);
                    }

                    if (expertise.length) {
                        const expertiseCard = document.createElement('article');
                        expertiseCard.className = 'hero-card hero-card--accent';
                        const title = document.createElement('h3');
                        title.textContent = 'Expertise';
                        const list = document.createElement('ul');
                        expertise.slice(0, 6).forEach((item) => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            list.appendChild(li);
                        });
                        expertiseCard.append(title, list);
                        heroPanelsEl.appendChild(expertiseCard);
                    }

                    if (skillList.length) {
                        const skillsCard = document.createElement('article');
                        skillsCard.className = 'hero-card';
                        const title = document.createElement('h3');
                        title.textContent = 'Core Skills';
                        const list = document.createElement('ul');
                        skillList.slice(0, 6).forEach((item) => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            list.appendChild(li);
                        });
                        skillsCard.append(title, list);
                        heroPanelsEl.appendChild(skillsCard);
                    }

                    toggleElement(heroPanelsEl, Boolean(heroPanelsEl.children.length));
                }

                if (aboutSummaryEl) {
                    aboutSummaryEl.innerHTML = '';
                    summaryParagraphs.forEach((paragraph) => {
                        const p = document.createElement('p');
                        p.textContent = paragraph;
                        aboutSummaryEl.appendChild(p);
                    });
                }

                if (aboutDetailsEl) {
                    aboutDetailsEl.innerHTML = '';
                    if (expertise.length) {
                        const expertiseCard = document.createElement('article');
                        expertiseCard.className = 'about-card';
                        const title = document.createElement('h3');
                        title.textContent = 'Expertise Highlights';
                        const list = document.createElement('ul');
                        list.className = 'about-card__list';
                        expertise.forEach((item) => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            list.appendChild(li);
                        });
                        expertiseCard.append(title, list);
                        aboutDetailsEl.appendChild(expertiseCard);
                    }

                    if (focus_areas.length) {
                        const focusCard = document.createElement('article');
                        focusCard.className = 'about-card';
                        const title = document.createElement('h3');
                        title.textContent = 'Focus Areas';
                        const list = document.createElement('ul');
                        list.className = 'about-card__list';
                        focus_areas.forEach((item) => {
                            const li = document.createElement('li');
                            li.textContent = item;
                            list.appendChild(li);
                        });
                        focusCard.append(title, list);
                        aboutDetailsEl.appendChild(focusCard);
                    }

                    toggleElement(aboutDetailsEl, Boolean(aboutDetailsEl.children.length));
                }

                const navItems = [{ id: 'overview', label: 'Overview' }];

                const hasAboutContent = Boolean(
                    (aboutSummaryEl && aboutSummaryEl.children.length) ||
                    (aboutDetailsEl && aboutDetailsEl.children.length)
                );
                toggleSection('about', hasAboutContent);
                if (hasAboutContent) {
                    navItems.push({ id: 'about', label: 'Summary' });
                }

                if (educationEl) {
                    educationEl.innerHTML = '';
                    education.forEach((item) => {
                        const article = document.createElement('article');
                        article.className = 'timeline__item';
                        const dot = document.createElement('div');
                        dot.className = 'timeline__dot';
                        dot.setAttribute('aria-hidden', 'true');
                        const content = document.createElement('div');
                        content.className = 'timeline__content';
                        const title = document.createElement('h3');
                        title.textContent = item.degree;
                        const meta = document.createElement('p');
                        meta.className = 'timeline__meta';
                        meta.textContent = `${item.institution || ''}${item.location ? ` · ${item.location}` : ''}${
                            item.date ? ` · ${item.date}` : ''
                        }`;
                        content.append(title, meta);
                        if (item.gpa) {
                            const gpa = document.createElement('p');
                            gpa.textContent = `GPA: ${item.gpa}`;
                            content.appendChild(gpa);
                        }
                        if (Array.isArray(item.details) && item.details.length) {
                            const list = document.createElement('ul');
                            item.details.forEach((detail) => {
                                const li = document.createElement('li');
                                li.textContent = detail;
                                list.appendChild(li);
                            });
                            content.appendChild(list);
                        }
                        article.append(dot, content);
                        educationEl.appendChild(article);
                    });
                }
                const hasEducation = Boolean(educationEl && educationEl.children.length);
                toggleSection('education', hasEducation);
                if (hasEducation) {
                    navItems.push({ id: 'education', label: 'Education' });
                }

                if (experienceEl) {
                    experienceEl.innerHTML = '';
                    work_experience.forEach((item) => {
                        const article = document.createElement('article');
                        article.className = 'timeline__item';
                        const dot = document.createElement('div');
                        dot.className = 'timeline__dot';
                        dot.setAttribute('aria-hidden', 'true');
                        const content = document.createElement('div');
                        content.className = 'timeline__content';
                        const title = document.createElement('h3');
                        title.textContent = item.title;
                        const meta = document.createElement('p');
                        meta.className = 'timeline__meta';
                        meta.textContent = `${item.organization || ''}${item.location ? ` · ${item.location}` : ''}${
                            item.date ? ` · ${item.date}` : ''
                        }`;
                        content.append(title, meta);
                        if (Array.isArray(item.bullet_points) && item.bullet_points.length) {
                            const list = document.createElement('ul');
                            item.bullet_points.forEach((point) => {
                                const li = document.createElement('li');
                                li.innerHTML = formatMarkdown(point);
                                list.appendChild(li);
                            });
                            content.appendChild(list);
                        }
                        article.append(dot, content);
                        experienceEl.appendChild(article);
                    });
                }
                const hasExperience = Boolean(experienceEl && experienceEl.children.length);
                toggleSection('experience', hasExperience);
                if (hasExperience) {
                    navItems.push({ id: 'experience', label: 'Experience' });
                }

                if (projectsEl) {
                    projectsEl.innerHTML = '';
                    projects.forEach((project) => {
                        const li = document.createElement('li');
                        li.className = 'card';
                        const title = document.createElement('h3');
                        title.innerHTML = formatMarkdown(project.title);
                        li.appendChild(title);
                        if (project.skills) {
                            const skills = document.createElement('p');
                            skills.innerHTML = formatMarkdown(project.skills);
                            skills.className = 'card__meta';
                            li.appendChild(skills);
                        }
                        if (Array.isArray(project.bullet_points) && project.bullet_points.length) {
                            const list = document.createElement('ul');
                            project.bullet_points.forEach((point) => {
                                const bullet = document.createElement('li');
                                bullet.innerHTML = formatMarkdown(point);
                                list.appendChild(bullet);
                            });
                            li.appendChild(list);
                        }
                        projectsEl.appendChild(li);
                    });
                }
                const hasProjects = Boolean(projectsEl && projectsEl.children.length);
                toggleSection('projects', hasProjects);
                if (hasProjects) {
                    navItems.push({ id: 'projects', label: 'Projects' });
                }

                if (skillsEl) {
                    skillsEl.innerHTML = '';
                    if (skillList.length) {
                        const column = document.createElement('div');
                        const title = document.createElement('h3');
                        title.textContent = 'Key Skills';
                        const list = document.createElement('ul');
                        list.className = 'chip-list';
                        skillList.forEach((skill) => {
                            const chip = document.createElement('li');
                            chip.textContent = skill;
                            list.appendChild(chip);
                        });
                        column.append(title, list);
                        skillsEl.appendChild(column);
                    }
                }
                const hasSkills = Boolean(skillsEl && skillsEl.querySelector('.chip-list li'));
                toggleSection('skills', hasSkills);
                if (hasSkills) {
                    navItems.push({ id: 'skills', label: 'Skills' });
                }

                if (honorsEl) {
                    honorsEl.innerHTML = '';
                    honors_awards.forEach((honor) => {
                        const li = document.createElement('li');
                        li.textContent = honor;
                        honorsEl.appendChild(li);
                    });
                }
                const hasHonors = Boolean(honorsEl && honorsEl.children.length);
                toggleSection('honors', hasHonors);
                if (hasHonors) {
                    navItems.push({ id: 'honors', label: 'Honors' });
                }

                if (publicationsEl) {
                    publicationsEl.innerHTML = '';
                    publications.forEach((pub) => {
                        const li = document.createElement('li');
                        const title = document.createElement('span');
                        title.className = 'pub-title';
                        title.innerHTML = formatMarkdown(pub.title);
                        const meta = document.createElement('span');
                        meta.className = 'pub-meta';
                        const parts = [pub.authors, pub.venue].filter(Boolean).join(' · ');
                        meta.innerHTML = formatMarkdown(parts);
                        li.append(title, meta);
                        if (pub.link) {
                            const link = document.createElement('a');
                            link.href = pub.link;
                            link.target = '_blank';
                            link.rel = 'noopener';
                            link.textContent = 'View';
                            link.className = 'pub-link';
                            li.appendChild(link);
                        }
                        publicationsEl.appendChild(li);
                    });
                }
                const hasPublications = Boolean(publicationsEl && publicationsEl.children.length);
                toggleSection('publications', hasPublications);
                if (hasPublications) {
                    navItems.push({ id: 'publications', label: 'Publications' });
                }

                if (patentsEl) {
                    patentsEl.innerHTML = '';
                    patent.forEach((entry) => {
                        const li = document.createElement('li');
                        li.className = 'card';
                        const para = document.createElement('p');
                        para.textContent = entry;
                        li.appendChild(para);
                        patentsEl.appendChild(li);
                    });
                }
                const hasPatents = Boolean(patentsEl && patentsEl.children.length);
                toggleSection('patents', hasPatents);
                if (hasPatents) {
                    navItems.push({ id: 'patents', label: 'Patents' });
                }

                if (sidebarContactEl) {
                    sidebarContactEl.innerHTML = '';
                    contacts.forEach((item) => {
                        const link = document.createElement('a');
                        link.href = item.href;
                        if (item.type !== 'email' && item.type !== 'phone') {
                            link.target = '_blank';
                            link.rel = 'noopener';
                        }
                        const icon = document.createElement('i');
                        icon.className =
                            item.type === 'email'
                                ? 'fas fa-envelope'
                                : item.type === 'phone'
                                ? 'fas fa-phone'
                                : item.type === 'linkedin'
                                ? 'fab fa-linkedin'
                                : item.type === 'github'
                                ? 'fab fa-github'
                                : 'fas fa-link';
                        const span = document.createElement('span');
                        span.textContent = item.label;
                        link.append(icon, span);
                        sidebarContactEl.appendChild(link);
                    });
                    toggleElement(sidebarContactEl, Boolean(sidebarContactEl.children.length));
                }

                if (contactBodyEl) {
                    contactBodyEl.innerHTML = '';
                    if (summaryParagraphs.length) {
                        const paragraph = document.createElement('p');
                        paragraph.textContent = summaryParagraphs[0];
                        contactBodyEl.appendChild(paragraph);
                    } else if (header.role) {
                        const paragraph = document.createElement('p');
                        paragraph.textContent = header.role;
                        contactBodyEl.appendChild(paragraph);
                    }
                }

                if (contactActionsEl) {
                    contactActionsEl.innerHTML = '';
                    contacts.forEach((item) => {
                        const link = document.createElement('a');
                        link.className = `button${item.type === 'email' ? ' primary' : ''}`;
                        link.href = item.href;
                        if (item.type !== 'email' && item.type !== 'phone') {
                            link.target = '_blank';
                            link.rel = 'noopener';
                        }
                        const icon = document.createElement('i');
                        icon.className =
                            item.type === 'email'
                                ? 'fas fa-envelope'
                                : item.type === 'phone'
                                ? 'fas fa-phone'
                                : item.type === 'linkedin'
                                ? 'fab fa-linkedin'
                                : item.type === 'github'
                                ? 'fab fa-github'
                                : 'fas fa-link';
                        link.appendChild(icon);
                        const textNode = document.createTextNode(item.type === 'email' ? 'Email' : item.label);
                        link.appendChild(textNode);
                        contactActionsEl.appendChild(link);
                    });
                }
                const hasContact = Boolean(
                    (contactBodyEl && contactBodyEl.children.length) ||
                    (contactActionsEl && contactActionsEl.children.length)
                );
                toggleSection('contact', hasContact);
                if (hasContact) {
                    navItems.push({ id: 'contact', label: 'Contact' });
                }

                populateNav(navItems);
            };
            fetch('resume.yaml')
                .then((response) => response.text())
                .then((text) => window.jsyaml.load(text))
                .then((data) => populateResume(data?.resume || data))
                .catch((error) => {
                    console.error('Failed to load resume data', error);
                });

            const yearEl = document.getElementById('year');
            if (yearEl) {
                yearEl.textContent = new Date().getFullYear();
            }
        })();
    </script>
</body>
</html>
